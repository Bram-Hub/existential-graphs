(this["webpackJsonpexistential-graphs"]=this["webpackJsonpexistential-graphs"]||[]).push([[0],{63:function(t,e,n){},69:function(t,e,n){},70:function(t,e,n){},72:function(t,e,n){},73:function(t,e,n){},75:function(t,e,n){},77:function(t,e,n){"use strict";n.r(e),n.d(e,"graph",(function(){return ft})),n.d(e,"paper",(function(){return gt}));var a=n(24),o=n(64),i=n.n(o),r=n(36),s=n(22),c=n(28),l=n(29),d=n(31),u=n(30),f=n(27),h=n.n(f),p=(n(69),n(70),n(6)),g=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(p.jsx)("button",{className:"button-group-button",onClick:this.props.onClick,children:this.props.text})}}]),n}(h.a.Component),b=(n(72),function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{className:"button-group",children:this.props.buttons.map((function(t){return Object(p.jsx)(g,{text:t.text,onClick:t.onClick},t.text)}))})}}]),n}(h.a.Component)),v=(n(73),n(25)),m=n(58),y=n(35),w=n(4),x=n.n(w),j=n(17),O={background:{odd:{inactive:"#f2f8fc",active:"#f2f8fcE0"},even:{inactive:"#ffffff",active:"#ffffffE0"},default:{color:"#ffffff00"}}};function C(t){for(;t.get("parent");)t=t.getParentCell();return t}var k={even:O.background.even.inactive,odd:O.background.odd.inactive,premise:O.background.default.color};function _(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k;console.log("RECOLOR START =====");var n=C(t);if("dia.Element.Premise"===n.attributes.type)return console.log("premise root"),void n.attr("rect/fill",e.premise);n.attr("level",0),n.attr("rect/fill",e.odd);for(var a=0,o=n.getEmbeddedCells();o.length>0;){var i=(++a+1)%2;console.log("level: parity",a,i);var r,s=[],c=Object(v.a)(o);try{for(c.s();!(r=c.n()).done;){var l=r.value;console.log("child",l),l.attr("level",a),"dia.Element.Premise"!==l.attributes.type?(l.attributes.attrs.level=a,0===i?(console.log("even!!"),l.attr("rect/fill",e.even)):(console.log("odd!!"),l.attr("rect/fill",e.odd)),s.push.apply(s,Object(j.a)(l.getEmbeddedCells()))):(console.log("is premise"),l.attr("rect/fill",e.premise))}}catch(d){c.e(d)}finally{c.f()}o=s}}function E(t){var e={width:t.attributes.attrs.rect.width,height:t.attributes.attrs.rect.height,x:t.attributes.position.x,y:t.attributes.position.y},n=function(t){if(0===t.length)return;var e,n=t[0].attributes.attrs.rect.width*t[0].attributes.attrs.rect.height,a=t[0],o=Object(v.a)(t);try{for(o.s();!(e=o.n()).done;){var i=e.value,r=i.attributes.attrs.rect.width*i.attributes.attrs.rect.height;r<n&&(n=r,a=i)}}catch(s){o.e(s)}finally{o.f()}return a}(function(t){var e,n=ft.getCells(),a=[],o=Object(v.a)(n);try{for(o.s();!(e=o.n()).done;){var i=e.value;B({width:i.attributes.attrs.rect.width,height:i.attributes.attrs.rect.height,x:i.attributes.position.x,y:i.attributes.position.y},t)&&a.push(i)}}catch(r){o.e(r)}finally{o.f()}return a}(e));if(n){var a=function(t,e){var n,a=ft.getCells(),o=[],i=Object(v.a)(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.get("parent")&&r.get("parent")!==t.id||o.push(r)}}catch(s){i.e(s)}finally{i.f()}return z(e,o)}(n,e);n.embed(t);var o,i=Object(v.a)(a);try{for(i.s();!(o=i.n()).done;){var r=o.value;r.get("parent")&&(n.unembed(r),t.embed(r))}}catch(u){i.e(u)}finally{i.f()}L(n)}else{var s,c=z(e),l=Object(v.a)(c);try{for(l.s();!(s=l.n()).done;){var d=s.value;d.get("parent")||d.id===t.id||t.embed(d)}}catch(u){l.e(u)}finally{l.f()}L(t)}_(t)}function z(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ft.getCells(),a=[],o=Object(v.a)(n);try{for(o.s();!(e=o.n()).done;){var i=e.value,r={width:i.attributes.attrs.rect.width,height:i.attributes.attrs.rect.height,x:i.attributes.position.x,y:i.attributes.position.y};B(t,r)&&a.push(i)}}catch(s){o.e(s)}finally{o.f()}return a}function B(t,e){var n=t.x,a=t.x+t.width,o=t.y,i=t.y+t.height,r=e.x,s=e.x+e.width,c=e.y,l=e.y+e.height;return n<r&&a>s&&o<c&&i>l}function L(t){for(var e=[t],n=[];e.length>0;){var a,o=Object(v.a)(e);try{for(o.s();!(a=o.n()).done;){var i,r=a.value;r.toFront();var s=r.getEmbeddedCells();(i=n).push.apply(i,Object(j.a)(s))}}catch(c){o.e(c)}finally{o.f()}e=n,n=[]}}function S(t){var e=t&&t.r||7,n=t&&t.fill||"transparent",a=t&&t.x||"0%",o=t&&t.y||"0%",i=t&&t.offset||{x:0,y:0},r=t&&t.cursor||"nw-resize";return{markup:[{tagName:"circle",selector:"button",attributes:{r:e,fill:n,cursor:r,"data-direction":r.substring(0,2)}}],x:a,y:o,offset:i,rotate:!0}}var A={x:0,y:0},M={x:0,y:0},R=40,q=40;function T(t){var e=ft.getCell(x()(t.target).parent().attr("model-id"));console.log("target model",e),A={x:t.clientX,y:t.clientY},x()(document).on("mouseup",{target:e},I),x()(document).on("mousemove",{target:e,direction:t.target.getAttribute("data-direction")},P),t.stopPropagation(),e.get("parent")&&ft.getCell(e.get("parent")).unembed(e)}function P(t){M={x:t.clientX,y:t.clientY};var e=t.data.target.attributes.attrs.rect.width,n=t.data.target.attributes.attrs.rect.height,a=t.data.target.attributes.position.x,o=t.data.target.attributes.position.y,i={x:M.x-A.x,y:M.y-A.y},r={size_x:1,size_y:1,pos_x:0,pos_y:0};switch(t.data.direction){case"nw":r.size_x=-1,r.size_y=-1,r.pos_x=1,r.pos_y=1;break;case"ne":r.size_x=1,r.size_y=-1,r.pos_x=0,r.pos_y=1;break;case"sw":r.size_x=-1,r.size_y=1,r.pos_x=1,r.pos_y=0;break;case"se":r.size_x=1,r.size_y=1,r.pos_x=0,r.pos_y=0;break;default:throw new RangeError("Invalid direction value. Expected nw, ne, sw, se. Got "+t.data.irection)}e+r.size_x*i.x<R&&(i.x=0),n+r.size_y*i.y<q&&(i.y=0),t.data.target.attr("rect/width",e+r.size_x*i.x),t.data.target.attr("rect/height",n+r.size_y*i.y),t.data.target.set("position",{x:a+r.pos_x*i.x,y:o+r.pos_y*i.y}),A=Object.assign({},M)}function I(t){x()(document).off("mouseup",I),x()(document).off("mousemove",P),E(t.data.target)}var V=n(5),N=n.n(V),D=n.p+"static/media/snip.6f2bc4d7.wav",H={position:{x:10,y:10},size:{width:40,height:40},attrs:{rect:{class:"cut_rect",width:40,height:40,fill:"#ffffff99",stroke:"black",strokeWidth:2},text:{class:"cut_text",fontSize:30,"ref-x":.5,"ref-y":.5,ref:"rect","y-alignment":"middle","x-alignment":"middle"}}},Z=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).markup=[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],t}return Object(l.a)(n,[{key:"defaults",value:function(){return Object(a.a)(Object(a.a)({},Object(m.a)(Object(y.a)(n.prototype),"defaults",this)),{},{type:"dia.Element.Cut",attrs:{rect:H.attrs.rect,text:H.attrs.text}})}},{key:"create",value:function(t){var e=N.a.cloneDeep(H);t&&(e.position=Object.assign(e.position,t.position),e.size=Object.assign(e.size,t.size),e.attrs.rect=Object.assign(e.attrs.rect,t.attrs&&t.attrs.rect),e.attrs.text=Object.assign(e.attrs.text,t.attrs&&t.attrs.text)),console.log("options",N.a.cloneDeep(e));var o=new n({markup:"<rect/><text/>",position:Object(a.a)({},e.position),size:Object(a.a)({},e.size),attrs:{rect:Object(a.a)({},e.attrs.rect),text:Object(a.a)({},e.attrs.text),level:0}});if(o.addTo(ft),function(t){var e=t.findView(gt);e.removeTools();var n=new s.g.Boundary,a=new s.g.Button(S({x:"0%",y:"0%",cursor:"nw-resize"})),o=new s.g.Button(S({x:"100%",y:"0%",cursor:"ne-resize"})),i=new s.g.Button(S({x:"0%",y:"100%",cursor:"sw-resize"})),r=new s.g.Button(S({x:"100%",y:"100%",cursor:"se-resize"}));x()(a.el).on("mousedown",T),x()(o.el).on("mousedown",T),x()(i.el).on("mousedown",T),x()(r.el).on("mousedown",T);var c=[n,a,o,r,i],l=new s.f.ToolsView({tools:c});e.addTools(l),e.hideTools()}(o),t&&t.child){var i=t.child,r=!1;if(i.get("parent")){var c=ft.getCell(i.get("parent"));c.unembed(i),c.embed(o),c.toBack(),r=!0}o.embed(i),o.attr("rect/width",i.attributes.attrs.rect.width+o.attributes.attrs.rect.width),o.attr("rect/height",i.attributes.attrs.rect.height+o.attributes.attrs.rect.height),o.set("position",{x:i.attributes.position.x-(o.attributes.attrs.rect.width-i.attributes.attrs.rect.width)/2,y:i.attributes.position.y-(o.attributes.attrs.rect.height-i.attributes.attrs.rect.height)/2}),r&&function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];console.log("resize_value",e);for(var a=t.getParentCell();a;)console.log("current",a),a.attr("rect/width",a.attributes.attrs.rect.width+e),a.attr("rect/height",a.attributes.attrs.rect.height+e),n&&a.set("position",{x:a.attributes.position.x-e/2,y:a.attributes.position.y-e/2}),a=a.getParentCell()}(o,o.attributes.attrs.rect.width/2)}return console.log(o),E(o),new Audio(D).play(),o}},{key:"destroy",value:function(){var t,e=this.getParentCell(),n=this.getEmbeddedCells(),a=Object(v.a)(n);try{for(a.s();!(t=a.n()).done;){var o=t.value;this.unembed(o)}}catch(i){a.e(i)}finally{a.f()}this.remove(),e&&E(e)}},{key:"active",value:function(){_(this,{even:O.background.even.active,odd:O.background.odd.active,premise:O.background.default.color})}},{key:"inactive",value:function(){_(this,{even:O.background.even.inactive,odd:O.background.odd.inactive,premise:O.background.default.color})}}]),n}(s.f.Element);Object.assign(r,{"dia.Element":{Cut:Z}});var U=function(t){},F=function(t){if(console.log(t.attributes.attrs.level),t.attributes.attrs.level%2===0){var e=t.attributes.attrs.embeds;t.destroy(),t.attributes.parent?E(ft.getCell(t.attributes.parent)):null===e||void 0===e||e.forEach((function(t){"Cut"==ft.getCell(t).__proto__.constructor.name&&E(ft.getCell(t))}))}},J=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},a={};if(!t&&e)n=e,a={width:40,height:40};else{if(!t)throw new Error("Bad arguments");n=t.get("position"),a={width:t.attr("rect/width"),height:t.attr("rect/height")}}for(var o=[.5,.25],i=0;i<o.length;i++){var r=(new Z).create({position:n,attrs:{rect:{width:a.width*(1+o[i]),height:a.height*(1+o[i])}}});r.set("position",{x:r.get("position").x-a.width*o[i]/2,y:r.get("position").y-a.height*o[i]/2}),E(r)}},Q=function(t){var e;if(console.log("MODEL: ",t),"Cut"==t.__proto__.constructor.name&&1==(null===(e=t.attributes.embeds)||void 0===e?void 0:e.length)&&"Cut"==ft.getCell(t.attributes.embeds[0]).__proto__.constructor.name){var n=ft.getCell(t.attributes.embeds[0]).attributes.embeds;ft.getCell(t.attributes.embeds[0]).destroy(),t.destroy(),t.attributes.parent?E(ft.getCell(t.attributes.parent)):null===n||void 0===n||n.forEach((function(t){"Cut"==ft.getCell(t).__proto__.constructor.name&&E(ft.getCell(t))}))}},G=function(t){},X=function(t){},Y=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={buttons:{create:[{text:"Add Premise",onClick:function(){console.log("Adding premise...")}},{text:"Cut",onClick:function(){console.log("Cutting...")}}],proof:[{text:"Insertion",onClick:function(){window.action=U,console.log("Performing insertion...")}},{text:"Erasure",onClick:function(){window.action=F,console.log("Performing erasure...")}},{text:"Insert Double Cut",onClick:function(){window.action=J,console.log("Inserting double cut...")}},{text:"Delete Double Cut",onClick:function(){window.action=Q,console.log("Deleting double cut...")}},{text:"Iteration",onClick:function(){window.action=G,console.log("Performing iteration...")}},{text:"Deiteration",onClick:function(){window.action=X,console.log("Performing deiteration...")}}]},color:{text:{create:"#E0FBFC",proof:"#293241"},background:{create:"#3D5A80",proof:"#98C1D9"}}},a}return Object(l.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{className:"menu-bar",style:{backgroundColor:this.state.color.background[this.props.mode],color:this.state.color.text[this.props.mode]},children:Object(p.jsxs)("div",{id:"side-wrapper",children:[Object(p.jsxs)("h2",{children:[this.props.mode.charAt(0).toUpperCase()+this.props.mode.slice(1)," Mode"]}),Object(p.jsx)(g,{text:"Switch Mode",onClick:this.props.onStateSwitch}),Object(p.jsx)(b,{buttons:this.state.buttons[this.props.mode],mode:this.props.mode})]})})}}]),n}(h.a.Component);n.p,n(63);function K(t){var e="\n    .cls-1{\n      fill:#ed6b4d;\n      stroke:#e2f3f7;\n      stroke-miterlimit:10;\n      stroke-width:12px;\n    }\n    .cls-2 {\n      fill:#e2f3f7;\n    }\n  ",n={"./MenuIcons/logo.png":Object(p.jsxs)("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 841.23 762.74",width:"8vh",height:"8vh",children:[Object(p.jsx)("defs",{children:Object(p.jsx)("style",{children:e})}),Object(p.jsx)("path",{class:"cls-1",d:"M1022,769v96.74q0,19.28-3.79,30.81a49,49,0,0,1-13.94,20.83q-10.17,9.28-26,17.9Q932.46,960,890.12,971.41t-92.27,11.36q-58.17,0-106-17.91t-81.58-52q-33.75-34.08-51.81-82.62Q543.75,790.83,541,743.9c-1,0-1.92,0-2.9,0H256.29q-33.87,0-48.71-15t-14.84-48.54V295.58q0-22.33,6.63-36.49a41.18,41.18,0,0,1,20.78-20.6Q234.3,232,256.29,232H530.06q24.78,0,36.84,11t12,28.81q0,18.15-12,29.15t-36.84,11H296.45V437.7h215.1q23.74,0,35.44,10.65t11.7,28.11q0,17.48-11.52,28.46t-35.62,11H296.45V661.53H538.09q3.76,0,7.26.27a287.88,287.88,0,0,1,12.56-47.73q17.55-48.89,51.64-83t83-52.15q48.88-18.07,110.85-18.08,51,0,90.2,13.6t63.69,34.25q24.43,20.67,36.83,43.73t12.39,41q0,19.29-14.28,32.88a47.94,47.94,0,0,1-34.26,13.6,46.05,46.05,0,0,1-21.17-5.17,48,48,0,0,1-17-14.46q-18.93-29.6-32-44.75T852.42,550q-22.2-10.34-56.63-10.33-35.46,0-63.34,12.22a130.87,130.87,0,0,0-47.68,35.46q-19.8,23.24-30.3,57T644,719.07q0,88.81,40.8,136.67t113.77,47.85a231.88,231.88,0,0,0,66.62-9.3,337.73,337.73,0,0,0,63.17-26.51V785.85H849.15q-28.57,0-43.21-8.61T791.31,748q0-16.86,12.22-27.88t33.22-11h116q21.35,0,36.15,3.79a40.81,40.81,0,0,1,23.92,16.87Q1022,742.82,1022,769Z",transform:"translate(-186.74 -226.03)"})]}),"./MenuIcons/export.png":Object(p.jsxs)("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 841.24 898.25",width:"4vh",height:"4vh",children:[Object(p.jsx)("defs",{children:Object(p.jsx)("style",{children:e})}),Object(p.jsx)("path",{class:"cls-2",d:"M1020.62,789.78v249a40.18,40.18,0,0,1-40.18,40.17H219.56a40.18,40.18,0,0,1-40.18-40.17v-249a40.18,40.18,0,0,1,40.18-40.18h58.25A40.18,40.18,0,0,1,318,789.78V940.34H882V789.78a40.18,40.18,0,0,1,40.17-40.18h58.25A40.18,40.18,0,0,1,1020.62,789.78Z",transform:"translate(-179.38 -180.69)"}),Object(p.jsx)("path",{class:"cls-2",d:"M384.19,390.1,533.64,240.66l48.21-48.21a38.5,38.5,0,0,1,55.4,0l48.22,48.22L834.9,390.1a40.17,40.17,0,0,1,0,56.81L793.71,488.1a40.17,40.17,0,0,1-56.81,0L679,430.18V751.79A40.18,40.18,0,0,1,638.81,792H580.55a40.18,40.18,0,0,1-40.17-40.17V429.91L482.19,488.1a40.17,40.17,0,0,1-56.81,0l-41.19-41.19A40.17,40.17,0,0,1,384.19,390.1Z",transform:"translate(-179.38 -180.69)"}),Object(p.jsx)("path",{class:"cls-2",d:"M665.69,620.82a40.39,40.39,0,0,1-5.61,7L618.9,669a40.08,40.08,0,0,1-29.11,11.76A40,40,0,0,0,617.48,669Z",transform:"translate(-179.38 -180.69)"}),Object(p.jsx)("path",{class:"cls-2",d:"M589.79,680.79A40,40,0,0,1,560.67,669l-41.19-41.19a40.14,40.14,0,0,1-5.62-7L562.08,669A40,40,0,0,0,589.79,680.79Z",transform:"translate(-179.38 -180.69)"})]}),"./MenuIcons/import.png":Object(p.jsxs)("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 841.24 898.26",width:"4vh",height:"4vh",children:[Object(p.jsx)("defs",{children:Object(p.jsx)("style",{children:e})}),Object(p.jsx)("path",{class:"cls-2",d:"M1020.62,789.78v249a40.18,40.18,0,0,1-40.18,40.17H219.56a40.18,40.18,0,0,1-40.18-40.17v-249a40.18,40.18,0,0,1,40.18-40.18h58.25A40.18,40.18,0,0,1,318,789.78V940.34H882V789.78a40.18,40.18,0,0,1,40.17-40.18h58.25A40.18,40.18,0,0,1,1020.62,789.78Z",transform:"translate(-179.38 -180.68)"}),Object(p.jsx)("path",{class:"cls-2",d:"M834.91,582.54,685.46,732l-48.21,48.21a38.5,38.5,0,0,1-55.4,0L533.63,732,384.2,582.54a40.17,40.17,0,0,1,0-56.81l41.19-41.19a40.17,40.17,0,0,1,56.81,0l57.92,57.92V220.85a40.18,40.18,0,0,1,40.17-40.17h58.26a40.18,40.18,0,0,1,40.17,40.17V542.73l58.19-58.19a40.17,40.17,0,0,1,56.81,0l41.19,41.19A40.17,40.17,0,0,1,834.91,582.54Z",transform:"translate(-179.38 -180.68)"}),Object(p.jsx)("path",{class:"cls-2",d:"M665.69,620.82a40.39,40.39,0,0,1-5.61,7L618.9,669a40.08,40.08,0,0,1-29.11,11.76A40,40,0,0,0,617.48,669Z",transform:"translate(-179.38 -180.68)"}),Object(p.jsx)("path",{class:"cls-2",d:"M589.79,680.79A40,40,0,0,1,560.67,669l-41.19-41.19a40.14,40.14,0,0,1-5.62-7L562.08,669A40,40,0,0,0,589.79,680.79Z",transform:"translate(-179.38 -180.68)"})]})},a=(t.text,""===t.img?"100%":"70%");t.img;return Object(p.jsxs)("div",{style:{marginLeft:t.margin_left,cursor:"pointer"},className:"menu-item",onClick:t.onClick,children:[n[t.img],Object(p.jsx)("h4",{style:{fontSize:a},children:t.text})]})}var W=[{text:"",img:"./MenuIcons/logo.png",onClick:function(){window.open("https://github.com/eddiekrystowski/existential-graphs")},margin_left:"0vw"},{text:"Existential Graphs",img:"",onClick:function(){},margin_left:"1vw"},{text:"Import",img:"./MenuIcons/import.png",onClick:function(){console.log("Importing...");var t=document.createElement("input");t.type="file",t.onchange=function(t){var e=t.target.files[0];if("application/json"===e.type){var n=new FileReader;n.readAsText(e,"UTF-8"),n.onload=function(t){var e=t.target.result;if(window.confirm("Erase your current workspace and import graph?")){ft.clear();var n=JSON.parse(e);ft.fromJSON(n)}}}else alert("File must be of .JSON type")},t.click()},margin_left:"10vw"},{text:"Export",img:"./MenuIcons/export.png",onClick:function(){console.log("Exporting...");var t=ft.toJSON(),e=new Blob([JSON.stringify(t)],{type:"application/json"}),n=document.createElement("a"),a=URL.createObjectURL(e);n.href=a,n.download="graph.json",document.body.appendChild(n),n.click(),setTimeout((function(){document.body.removeChild(n),window.URL.revokeObjectURL(a)}),0)},margin_left:"5vw"}];function $(){return Object(p.jsx)("div",{className:"header-bar",children:W.map((function(t){return Object(p.jsx)(K,{text:t.text,img:t.img,onClick:t.onClick,margin_left:t.margin_left},t.text)}))})}var tt=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={mode:"create"},a}return Object(l.a)(n,[{key:"handleStateSwitch",value:function(){console.log("Switching state..."),console.log(this.state),this.setState({mode:"create"===this.state.mode?"proof":"create"}),window.mode="create"===this.state.mode?"proof":"create"}},{key:"render",value:function(){var t=this;return Object(p.jsxs)("div",{className:"app",children:[Object(p.jsx)($,{id:"header"}),Object(p.jsx)(Y,{mode:this.state.mode,onStateSwitch:function(){t.handleStateSwitch()}}),Object(p.jsx)("div",{id:"paper-wrapper",children:Object(p.jsx)("div",{id:"paper-container"})})]})}}]),n}(h.a.Component);n(75);var et=n.p+"static/media/pop.cddf7df9.wav",nt={position:{x:10,y:10},size:{width:40,height:40},attrs:{rect:{class:"premise_rect",width:40,height:40,fill:"#ffffff00",stroke:"black",strokeWidth:0},text:{class:"premise_text",text:"P",fontSize:50,"ref-x":.5,"ref-y":.5,ref:"rect","x-alignment":"middle","y-alignment":"middle"}}},at=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).markup=[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],t}return Object(l.a)(n,[{key:"defaults",value:function(){return Object(a.a)(Object(a.a)({},Object(m.a)(Object(y.a)(n.prototype),"defaults",this)),{},{type:"dia.Element.Premise",attrs:{rect:nt.attrs.rect,text:nt.attrs.text}})}},{key:"create",value:function(t){var e=N.a.cloneDeep(nt);t&&(e.position=Object.assign(e.position,t.position),e.size=Object.assign(e.size,t.size),e.attrs.rect=Object.assign(e.attrs.rect,t.attrs&&t.attrs.rect),e.attrs.text=Object.assign(e.attrs.text,t.attrs&&t.attrs.text));var o=new n({markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>',position:Object(a.a)({},e.position),size:Object(a.a)({},e.size),attrs:{rect:Object(a.a)({},e.attrs.rect),text:Object(a.a)({},e.attrs.text),level:0}});return console.log(o),o.addTo(ft),function(t){var e=t.findView(gt);e.removeTools();var n=[new s.g.Boundary],a=new s.f.ToolsView({tools:n});e.addTools(a),e.hideTools()}(o),E(o),new Audio(et).play(),o}},{key:"destroy",value:function(){this.remove()}},{key:"active",value:function(){}},{key:"inactive",value:function(){}}]),n}(s.f.Element);function ot(t,e){var n=t[Object.keys(t)[0]],a=n.clone(),o=it(n,a,t);!function(t,e){var n={x:e.x-t.attributes.position.x,y:e.y-t.attributes.position.y};console.log(n);for(var a=[],o=[t];o.length>0;){a=o,o=[],console.log(a);var i,r=Object(v.a)(a);try{for(r.s();!(i=r.n()).done;){var s,c=i.value;(s=o).push.apply(s,Object(j.a)(c.getEmbeddedCells())),c.position(c.attributes.position.x+n.x,c.attributes.position.y+n.y)}}catch(l){r.e(l)}finally{r.f()}}}(o,e),E(o)}function it(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e.addTo(ft),null!=a&&a.embed(e);var o=t.get("embeds");if(o){var i,r=Object(v.a)(o);try{for(r.s();!(i=r.n()).done;){var s=i.value,c=rt(s,n);it(c,c.clone(),n,e)}}catch(l){r.e(l)}finally{r.f()}}return e}function rt(t,e){for(var n=0,a=Object.keys(e);n<a.length;n++){var o=e[a[n]];if(o.id===t)return o}return alert("find subgraph failed!"),null}Object.assign(r.shapes,{"dia.Element":{Premise:at}});var st=n.p+"static/media/delete.775131a8.wav";console.log("Starting..."),window.joint=r,window.action=null,window.mode="create";var ct=s.f.Element.define("nameSpace.Premise",at),lt=s.f.Element.define("nameSpace.Cut",Z);i.a.render(Object(p.jsx)(tt,{}),document.getElementById("root"));var dt=void 0,ut=void 0,ft=new s.f.Graph({},{cellNamespace:{nameSpace:{Premise:ct,Cut:lt}}}),ht=4e3,pt=4e3,gt=new s.f.Paper({el:document.getElementById("paper-container"),model:ft,height:pt,width:ht,preventContextMenu:!1,clickThreshold:1},{cellViewNamespace:{nameSpace:{Premise:ct,Cut:lt}}});(new at).create().position(100,30);var bt={x:0,y:0},vt=document.getElementById("paper-container"),mt=[],yt=!1,wt=void 0,xt={};x()(document).on("keydown",(function(t){mt[t.which]=!0,"create"===window.mode&&mt[16]&&gt.setInteractivity(!1)})),document.addEventListener("mousemove",(function(t){if(bt={x:t.clientX,y:t.clientY},"create"===window.mode&&yt&&mt[16]&&wt){var e={x:bt.x-vt.getBoundingClientRect().left,y:bt.y-vt.getBoundingClientRect().top};wt.set("position",{x:Math.min(e.x,xt.x),y:Math.min(e.y,xt.y)}),wt.attr("rect/width",Math.abs(e.x-xt.x)),wt.attr("rect/height",Math.abs(e.y-xt.y))}})),x()(document).on("mousedown",(function(t){if(yt=!0,mt[16]&&"create"===window.mode){(xt=Object.assign({},bt)).x-=vt.getBoundingClientRect().left,xt.y-=vt.getBoundingClientRect().top;var e={position:Object.assign({},xt),size:{width:0,height:0}};(wt=(new Z).create(e)).active(),t.preventDefault()}})),x()(document).on("mouseup",(function(t){if(yt=!1,"proof"===window.mode&&!dt&&window.action&&"insertDoubleCut"===window.action.name){var e={x:bt.x-vt.getBoundingClientRect().left,y:bt.y-vt.getBoundingClientRect().top};window.action(null,e),window.action=null}if(wt&&"create"===window.mode){var n=N.a.clone(wt.get("position")),o=N.a.clone({width:wt.attr("rect/width"),height:wt.attr("rect/height")}),i={position:n,attrs:{rect:Object(a.a)({},o)}};(new Z).create(i);wt.remove()}gt.setInteractivity(!0),wt=void 0})),x()(document).on("keyup",(function(t){if("proof"!==window.mode){console.log(t.which),mt[t.which]=!1;var e=t.key;if(8===t.keyCode){if(dt){var n=new Audio(st);"dia.Element.Premise"===dt.attributes.type||"dia.Element.Cut"===dt.attributes.type?(dt.destroy(),n.play()):console.error("attempted to delete shape of unknown type: "+dt.attributes.type)}dt=void 0}if(t.keyCode>=65&&t.keyCode<=90){var a={attrs:{text:{text:t.shiftKey?e.toLocaleLowerCase():e.toLocaleUpperCase()}},position:{x:bt.x-vt.getBoundingClientRect().left-20,y:bt.y-vt.getBoundingClientRect().top-20}};(new at).create(a)}if(13===t.keyCode){var o={position:{x:bt.x-vt.getBoundingClientRect().left-20,y:bt.y-vt.getBoundingClientRect().top-20}};if(dt){o.child=dt;(new Z).create(o)}else{console.log("creating empty cut");var i=(new Z).create(o);console.log("cut",i)}}if(49===t.keyCode&&dt&&(ut=ft.cloneSubgraph([dt],{deep:!0})),50===t.keyCode){var r={x:bt.x-vt.getBoundingClientRect().left-20,y:bt.y-vt.getBoundingClientRect().top-20};console.log("position",r),ut&&ot(ut,r)}t.preventDefault()}else if(window.action&&"inferenceInsertion"===window.action.name){if(!dt)return;if(dt.attributes.attrs.level%2===1)return;if(t.keyCode>=65&&t.keyCode<=90){var s={attrs:{text:{text:t.shiftKey?t.key.toLocaleLowerCase():t.key.toLocaleUpperCase()}},position:{x:bt.x-vt.getBoundingClientRect().left-20,y:bt.y-vt.getBoundingClientRect().top-20}};(new at).create(s)}window.action=null}})),gt.on("element:mouseenter",(function(t,e){var n=t.model;n.findView(gt).showTools(),n.attr("rect/stroke","red"),n.attr("text/fill","red"),dt=n})),gt.on("element:mouseleave",(function(t,e){var n=t.model,a=n.findView(gt);a&&(a.hideTools(),n.attr("rect/stroke","black"),n.attr("text/fill","black"),dt=void 0)})),gt.on("cell:pointerdown",(function(t,e,n,a){var o=t.model;o.get("embeds")&&0!==o.get("embeds").length||o.toFront(),o.get("parent")&&ft.getCell(o.get("parent")).unembed(o),o.active(),L(C(o))})),gt.on("cell:pointerup",(function(t,e,n,a){var o=t.model;E(o),o.inactive(),window.action&&window.action(o),window.action=null}))}},[[77,1,2]]]);
//# sourceMappingURL=main.932bbad3.chunk.js.map